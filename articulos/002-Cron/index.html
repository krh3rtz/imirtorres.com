<!doctype html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Pelican Static Site Generator, Powered by Python" />
    <meta name="description" content="En la administración de servidores, es común la realización de tareas tales como el logging de algún servicio o la ejecucución de scripts que realicen tareas específicas.">
    <meta name="keywords" content="Linux, articulos">
    <meta name="author" content="Imir Torres">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="">
    <meta name="twitter:title" content="Programa tareas con Cron">
    <meta name="twitter:description" content="En la administración de servidores, es común la realización de tareas tales como el logging de algún servicio o la ejecucución de scripts que realicen tareas específicas.">
    <meta name="twitter:image" content="/articulos/002-Cron/preview1.png">
    <meta property="og:title" content="Programa tareas con Cron">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/articulos/002-Cron/">
    <meta property="og:image" content="/articulos/002-Cron/preview1.png">
    <meta property="og:description" content="En la administración de servidores, es común la realización de tareas tales como el logging de algún servicio o la ejecucución de scripts que realicen tareas específicas.">
    <meta property="og:site_name" content="Ethergroup | Blog">
    <title>Programa tareas con Cron - Ethergroup | Blog</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" href="/theme/images/icon-hires.png" sizes="192x192" />
    <link rel="icon" href="/theme/images/icon-normal.png" sizes="128x128" />
    <link rel="apple-touch-icon" href="/theme/images/apple-touch-icon.png" />
    <link rel="apple-touch-icon" href="/theme/images/apple-touch-icon-76x76.png" sizes="76x76" />
    <link rel="apple-touch-icon" href="/theme/images/apple-touch-icon-120x120.png" sizes="120x120" />
    <link rel="apple-touch-icon" href="/theme/images/apple-touch-icon-152x152.png" sizes="152x152" />
    <link rel="apple-touch-icon" href="/theme/images/apple-touch-icon-180x180.png" sizes="180x180" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/css/bootstrap.min.css" integrity="sha512-GQGU0fMMi238uA+a/bdWJfpUGKUkBdgfFdgBm72SUQ6BeyWjoY/ton0tEjH+OSH9iP4Dfh+7HM0I9f5eR0L/4w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans&display=swap" />
    <link rel="stylesheet" href="/theme/css/movimientolibre-bs5.css" />
</head>
<body>
<nav id="navigationBase" class="navbar navbar-expand-sm fixed-top">
    <div class="container">
        <a class="navbar-brand" href="/"><i class="fa fa-home"></i></a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navigationCollapse" aria-controls="navigationCollapse" aria-expanded="false" aria-label="Toggle navigation">
            <span class="fas fa-bars"></span>
        </button>
        <div class="collapse navbar-collapse" id="navigationCollapse">
            <ul class="navbar-nav me-auto mb-2 mb-sm-0">
                <li class="nav-item"><a class="nav-link" href="/authors.html">Autores</a></li>
                <li class="nav-item"><a class="nav-link" href="/tags.html">Etiquetas</a></li>
                <li class="nav-item"><a class="nav-link" href="https://ethergroup.mx/">EtherGroup</a></li>
            </ul>
            <ul class="navbar-nav">
                <li><a class="mx-2" href="https://www.instagram.com/ethergroup/" target="_blank"><i class="fab fa-instagram-square fa-2x"></i></a></li>
                <li><a class="mx-2" href="https://www.facebook.com/EtherGroup-184831138858274" target="_blank"><i class="fab fa-facebook-square fa-2x"></i></a></li>
                <li><a class="mx-2" href="https://www.linkedin.com/company/ethergroup" target="_blank"><i class="fab fa-linkedin fa-2x"></i></a></li>
            </ul>
    </div>
    </div>
</nav><header id="headerSite" class="mb-4">
    <div id="headerSiteImage" class="container" itemscope itemtype="http://schema.org/Organization">
        <div class="row">
            <div class="col-xl-8">
                <h1 class="display-2" itemprop="name">Ethergroup | Blog</h1>
                <p class="lead" itemprop="description">Blog sobre tecnologías, hacking, ciberseguridad, software libre y mucho más</p>
            </div>
        </div>
    </div>
</header>    <div class="container">
        <div class="row">
            <div class="col-lg-8">
    <article>
        <script type="application/ld+json">
            {
                "@context": "http://schema.org",
                "@type": "Article",
                "publisher": {
                    "@type": "Organization",
                    "name": "Ethergroup | Blog",
                    "logo": {
                        "@type": "ImageObject",
                        "url": "/theme/images/ethergroup.png"
                    },
                    "url": ""
                },
                "author": "Imir Torres",
                "name": "Programa tareas con Cron",
                "headline": "Programa tareas con Cron",
                "description": "En la administración de servidores, es común la realización de tareas tales como el logging de algún servicio o la ejecucución de scripts que realicen tareas específicas.",
                "dateCreated": "2017-10-26 11:00:00-05:00",
                "datePublished": "2017-10-26 11:00:00-05:00",
                "dateModified": "",
                "image": "/articulos/002-Cron/preview1.png",
                "url": "/articulos/002-Cron/"
            }
        </script>
        <h2>Programa tareas con Cron</h2>
        <p class="lead">En la administración de servidores, es común la realización de tareas tales como el logging de algún servicio o la ejecucución de scripts que realicen tareas específicas.</p>
        <p>26 October 2017</p>
        <p><img class="img-fluid" src="002.jpg" alt="Foto 1"></p>
<hr>
<p>En la administración de servidores, es común la realización de tareas tales como el logging de algún servicio o la ejecucución de scripts que realicen tareas específicas. En esta ocasión aprenderemos  a administrar la "navaja suiza" de automatización para servidores GNU/Linux: Cron.</p>
<h2>¿Qué es Cron?</h2>
<p>Según nuestra fiel amiga Wikipedia:</p>
<p>"En el sistema operativo Unix, cron es un administrador regular de procesos en segundo plano (demonio) que ejecuta procesos o guiones a intervalos regulares (por ejemplo, cada minuto, día, semana o mes). Los procesos que deben ejecutarse y la hora en la que deben hacerlo se especifican en el fichero crontab. El nombre cron viene del griego chronos (χρόνος) que significa "tiempo"."</p>
<h3>Uso del demonio "Cron" (comando crontab)</h3>
<p>Para interactuar con crontab y en concreto con su archivo de configuración, existen diferentes parámetros que podemos pasar</p>
<ul>
<li>crontab -e      -&gt; Editar archivo crontab</li>
<li>crontab -r      -&gt; Borrar crontab</li>
<li>crontab -l      -&gt; Enlistar crontab</li>
</ul>
<p>Es posible ordenar que el demonio de Cron ejecute varias tareas a un tiempo determinado (hora de la máquina donde se ejecuta). La sintáxis puede parecer difícil a veces, pero con la práctica es bastante simple.</p>
<p><em>m h dom mon dow command</em></p>
<ul>
<li>m         = minuto</li>
<li>h          = hora</li>
<li>dom     = día del mes</li>
<li>mon     = mes</li>
<li>dow     = día de la semana</li>
<li>command = orden</li>
</ul>
<p>Cada de una de estas órdenes está delimitada por algún dígito numérico:</p>
<ul>
<li>minuto(0-59)</li>
<li>hora(0-23)</li>
<li>DíaDelMes(1-31)</li>
<li>Mes(1-12)</li>
<li>DíaDeLaSemana(0-6)</li>
<li>Comando</li>
</ul>
<p>NOTA: Los valores numéricos pueden ser sustituídos por el caracter '*', lo que significa que es 'todo'. </p>
<h3>INSTALACIÓN</h3>
<p>Para instalar Cron, es posible compilar el código desde los fuentes o realizar. En el caso específico de Debian, pueden hacer la descarga desde los
repositorios:</p>
<div class="highlight"><pre><span></span><code>apt-get install cron
</code></pre></div>

<p>o</p>
<div class="highlight"><pre><span></span><code>aptitude install cron
</code></pre></div>

<p>Luego de descargarlo, iniciamos el demonio</p>
<div class="highlight"><pre><span></span><code>/etc/init.d/cron start
</code></pre></div>

<p>o</p>
<div class="highlight"><pre><span></span><code>service cron start
</code></pre></div>

<p>o</p>
<div class="highlight"><pre><span></span><code>systemctl start cron
</code></pre></div>

<h3>INTERACTUANDO CON CRON</h3>
<p>Para poder interactuar con el demonio de Cron, es necesario ejecutar el comando:</p>
<div class="highlight"><pre><span></span><code>crontab -e
</code></pre></div>

<p>La primera vez que ejecutemos el comando, nos mostrará una lista de editores de texto en terminal que tenemos disponibles para utilizar. Seleccionamos alguno y continuamos.</p>
<p>Lo siguiente será editar el archivo cron. Para asignar tareas, hay que ir al
final del archivo cron, agregar comentario (en caso de ser necesario) iniciando la línea con el caracter '#' y justo debajo especificar la tarea a ejecutar así como su tiempo.</p>
<p>Cada una de las tareas que asignemos será ejecutada acorde al usuario con el que editemos el archivo. Procure ejecutar el cron con tareas que no requieran permisos de 'root' (en la medida de lo posible).</p>
<h3>SINTÁXIS Y EJEMPLOS</h3>
<p>Actualizar paquetes todos los días del mes, todos los meses todos los días
de la semana las 12</p>
<div class="highlight"><pre><span></span><code><span class="mf">00</span><span class="w"> </span><span class="mf">00</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">aptitude</span><span class="w"> </span><span class="n">update</span><span class="w"></span>
</code></pre></div>

<p>Actualizar paquetes todos los días del mes, todos los meses, los lunes
a las 12</p>
<div class="highlight"><pre><span></span><code><span class="mf">00</span><span class="w"> </span><span class="mf">00</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="n">aptitude</span><span class="w"> </span><span class="n">update</span><span class="w"></span>
</code></pre></div>

<p>Actualizar paquetes cada 5 minutos todos los días, a toda hora, todos los días del mes, todos los meses de lunes a viernes.</p>
<div class="highlight"><pre><span></span><code>*/5 * * * 1-5 aptitude update
</code></pre></div>

<p>NOTA: Luego de realizar cualquier cambio dentro del archivo cron, hay que reiniciar el demonio.</p>
<h3>ÓRDENES PREDEFINIDAS</h3>
<p>Cron cuenta con algunas funciones que nos facilitan la vida por mucho. Estas funciones  son para tiempos muy específicos</p>
<p>ordenes:</p>
<ul>
<li>@reboot</li>
<li>@hourly</li>
<li>@daily</li>
<li>@weekley</li>
</ul>
<p>Sintáxis:</p>
<p>orden comando</p>
<div class="highlight"><pre><span></span><code><span class="nv">@reboot</span><span class="w"> </span><span class="n">aptitude</span><span class="w"> </span><span class="k">update</span><span class="w"></span>
</code></pre></div>

<h3>PLUS</h3>
<p>Uno de los problemas que tiene Cron, es que el tiempo mínimo (nativo) para la ejecución de tareas es de 1 min. Sin embargo, en caso de necesitar ejecutar algún servicio en segundos podemos hacer los siguiente:</p>
<p>Dar ping a un equipo cada 15 segundos, todos los días a toda hora, todo el mes todos los meses toda la semana</p>
<div class="highlight"><pre><span></span><code>sleep 15 &amp;&amp; ping 192.168.1.254
</code></pre></div>

<p>En este ejemplo aprovechamos el comando 'sleep' para poder temporizar a nivel segundos.</p>
<p><strong>Exploiting vulnerabilities, creating new ways through</strong> <em>Happy Hacking!</em></p>
    </article>
            </div>
            <div class="col-lg-4">
                <aside>
<div id="asideAbout" class="card border-0">
    <div class="card-body">
        <h3 class="card-title mt-0">A cerca de EtherGroup</h3>
        <p class="card-text">
            Ethergroup es una empresa mexicana dedicada 
            a proveer servicios integrales en tecnologías
            de Información. Lideramos la transformación 
            tecnológica de nuestros clientes paso a paso, 
            de forma segura y fungimos como impulso a su 
            negocio en esta era digital.
            <br> <br>
            En Ethergroup nos encanta compartir 
            contenido te dejamos este espacio, 
            que busca divulgar conocimiento de 
            diferentes áreas.
        </p>
    </div>
</div><div id="asideTags" class="card border-0">
    <div class="card-body">
        <h3 class="card-title mt-0">Etiquetas</h3>
        <ul class="list-group list-group-flush">
<li class="list-group-item"><a href="/tag/ciberataque.html">Ciberataque</a></li><li class="list-group-item"><a href="/tag/ciberataques.html">Ciberataques</a></li><li class="list-group-item"><a href="/tag/ciberseguridad.html">Ciberseguridad</a></li><li class="list-group-item"><a href="/tag/hacking.html">Hacking</a></li><li class="list-group-item"><a href="/tag/linux.html">Linux</a></li><li class="list-group-item"><a href="/tag/malware.html">Malware</a></li><li class="list-group-item"><a href="/tag/programacion.html">Programación</a></li><li class="list-group-item"><a href="/tag/ransomware.html">Ransomware</a></li><li class="list-group-item"><a href="/tag/servidores.html">Servidores</a></li><li class="list-group-item"><a href="/tag/vulnerabilidad.html">Vulnerabilidad</a></li>        </ul>
    </div>
</div>                </aside>
            </div>
        </div>
    </div>
<footer class="text-muted">
    <div class="container">
        <p>
            Copyright &copy; Ethergroup 2021 | Cybersecurity E-group S. de R.L. de C.V. Sitio web de la empresa Ethergroup.
            Sitio web de la empresa <a href="https://ethergroup.mx/">EtherGroup.</a> 
        </p>
    </div>
</footer>    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/js/bootstrap.min.js" integrity="sha512-OvBgP9A2JBgiRad/mM36mkzXSXaJE9BEIENnVEmeZdITvwT09xnxLtT4twkCa8m/loMbPHsvPl0T8lRGVBwjlQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="/theme/js/navigation.js"></script>
</body>
</html>