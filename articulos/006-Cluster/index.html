<!doctype html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Pelican Static Site Generator, Powered by Python" />
    <meta name="description" content="Automatizar un poco la creación de máquinas virtuales en un perqueño server de pruebas local.">
    <meta name="keywords" content="Servidores, articulos">
    <meta name="author" content="Imir Torres">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="">
    <meta name="twitter:title" content="Crear pequeño cluster de servidores en Virtualbox">
    <meta name="twitter:description" content="Automatizar un poco la creación de máquinas virtuales en un perqueño server de pruebas local.">
    <meta name="twitter:image" content="/articulos/006-Cluster/preview1.png">
    <meta property="og:title" content="Crear pequeño cluster de servidores en Virtualbox">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/articulos/006-Cluster/">
    <meta property="og:image" content="/articulos/006-Cluster/preview1.png">
    <meta property="og:description" content="Automatizar un poco la creación de máquinas virtuales en un perqueño server de pruebas local.">
    <meta property="og:site_name" content="Ethergroup | Blog">
    <title>Crear pequeño cluster de servidores en Virtualbox - Ethergroup | Blog</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" href="/theme/images/icon-hires.png" sizes="192x192" />
    <link rel="icon" href="/theme/images/icon-normal.png" sizes="128x128" />
    <link rel="apple-touch-icon" href="/theme/images/apple-touch-icon.png" />
    <link rel="apple-touch-icon" href="/theme/images/apple-touch-icon-76x76.png" sizes="76x76" />
    <link rel="apple-touch-icon" href="/theme/images/apple-touch-icon-120x120.png" sizes="120x120" />
    <link rel="apple-touch-icon" href="/theme/images/apple-touch-icon-152x152.png" sizes="152x152" />
    <link rel="apple-touch-icon" href="/theme/images/apple-touch-icon-180x180.png" sizes="180x180" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/css/bootstrap.min.css" integrity="sha512-GQGU0fMMi238uA+a/bdWJfpUGKUkBdgfFdgBm72SUQ6BeyWjoY/ton0tEjH+OSH9iP4Dfh+7HM0I9f5eR0L/4w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans&display=swap" />
    <link rel="stylesheet" href="/theme/css/movimientolibre-bs5.css" />
</head>
<body>
<nav id="navigationBase" class="navbar navbar-expand-sm fixed-top">
    <div class="container">
        <a class="navbar-brand" href="/"><i class="fa fa-home"></i></a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navigationCollapse" aria-controls="navigationCollapse" aria-expanded="false" aria-label="Toggle navigation">
            <span class="fas fa-bars"></span>
        </button>
        <div class="collapse navbar-collapse" id="navigationCollapse">
            <ul class="navbar-nav me-auto mb-2 mb-sm-0">
                <li class="nav-item"><a class="nav-link" href="/authors.html">Autores</a></li>
                <li class="nav-item"><a class="nav-link" href="/tags.html">Etiquetas</a></li>
                <li class="nav-item"><a class="nav-link" href="https://ethergroup.mx/">EtherGroup</a></li>
            </ul>
            <ul class="navbar-nav">
                <li><a class="mx-2" href="https://www.instagram.com/ethergroup/" target="_blank"><i class="fab fa-instagram-square fa-2x"></i></a></li>
                <li><a class="mx-2" href="https://www.facebook.com/EtherGroup-184831138858274" target="_blank"><i class="fab fa-facebook-square fa-2x"></i></a></li>
                <li><a class="mx-2" href="https://www.linkedin.com/company/ethergroup" target="_blank"><i class="fab fa-linkedin fa-2x"></i></a></li>
            </ul>
    </div>
    </div>
</nav><header id="headerSite" class="mb-4">
    <div id="headerSiteImage" class="container" itemscope itemtype="http://schema.org/Organization">
        <div class="row">
            <div class="col-xl-8">
                <h1 class="display-2" itemprop="name">Ethergroup | Blog</h1>
                <p class="lead" itemprop="description">Blog sobre tecnologías, hacking, ciberseguridad, software libre y mucho más</p>
            </div>
        </div>
    </div>
</header>    <div class="container">
        <div class="row">
            <div class="col-lg-8">
    <article>
        <script type="application/ld+json">
            {
                "@context": "http://schema.org",
                "@type": "Article",
                "publisher": {
                    "@type": "Organization",
                    "name": "Ethergroup | Blog",
                    "logo": {
                        "@type": "ImageObject",
                        "url": "/theme/images/ethergroup.png"
                    },
                    "url": ""
                },
                "author": "Imir Torres",
                "name": "Crear pequeño cluster de servidores en Virtualbox",
                "headline": "Crear pequeño cluster de servidores en Virtualbox",
                "description": "Automatizar un poco la creación de máquinas virtuales en un perqueño server de pruebas local.",
                "dateCreated": "2018-03-11 11:00:00-06:00",
                "datePublished": "2018-03-11 11:00:00-06:00",
                "dateModified": "",
                "image": "/articulos/006-Cluster/preview1.png",
                "url": "/articulos/006-Cluster/"
            }
        </script>
        <h2>Crear pequeño cluster de servidores en Virtualbox</h2>
        <p class="lead">Automatizar un poco la creación de máquinas virtuales en un perqueño server de pruebas local.</p>
        <p>11 March 2018</p>
        <p><img class="img-fluid" src="006.jpg" alt="Foto 1"></p>
<hr>
<p>El propósito inicial era automatizar un poco la creación de máquinas virtuales en un perqueño server de pruebas local. La idea es tener un pequeño cluster de servidores virtuales pero a falta de $ para una licencia de VMWare ESXI pues el software opensource puede ayudar.</p>
<p><strong>SERVIDOR</strong></p>
<p>Lo que se me ocurrió es utilizar una máquina con Debian, VirtualBox y un servidor SSH instalados.</p>
<p>Hay muchas formas de implementar estas tecnologías solo les comparto algunas:</p>
<ul>
<li>Nuestro equipo debe tener una ip fija.</li>
<li>Podemos agregar llaves para una conexión SSH sin contraseña (y a un usuario sin privilegios para luego escalar a root).</li>
<li>En caso de querer agregar seguridad podemos configurar un firewall como NetFilter (o un frontend como ufw) o la nueva generación de FW llamada Nftables (de la cual escribiré un artículo pronto).</li>
</ul>
<p>La ventaja de esto es que podemos montar varios servidores y hacer pruebas con ellos (como un cluster). Esto claro limitado por las capacidades de nuestro equipo servidor.</p>
<p><strong>SCRIPT</strong></p>
<p>Cuando ya tengamos montado nuestro equipo con las especificaciones, podemos utilizar el siguiente script que dejo en mi <a href="https://archlinux.org/">github</a>.</p>
<p>Podemos copiar este script dentro de nuestro servidor con scp y modificar las variables que tiene. Está documentado con comentarios, así que es fácil de implementar y hasta modificar al gusto.</p>
<p><strong>VBOXHEADLESS</strong></p>
<p>Ahora viene la pregunta,  ¿pero cómo hacemos para administrar estas máquinas virtuales desde un equipo remoto? Bueno es aquí donde vboxheadless viene al rescate.</p>
<p>Casi al final del  script viene una sentencia "if" para agregar o no la funcionalidad de "vrde" a la máquina virtual. Esto significa que si queremos ser capaces de acceder de forma remota por medio de un escritorio remoto. Solamente necesitaremos un cliente para poder conectarnos</p>
<p>Primero iniciamos la máquina en el server remoto (obviamente desde nuestra sesión SSH):</p>
<div class="highlight"><pre><span></span><code>vboxheadless --startvm &quot;vm_name&quot; &amp;
</code></pre></div>

<p>Es necesario especificar el nombre de la máquina virtual entre comillas. Yo les recomiendo que no utilicen nombres con espacios, por aquello de las broncas luego. Lo que este comando hará será iniciar un server RDP accessible con cualquier cliente rdesktop. Voilá! Ya tenemos acceso remoto a la máquina virtual.</p>
<p><strong>RESUMEN</strong></p>
<p>Es obvio que el rendimiento de este "cluster de servers" no será el mismo que el de VMWare, pero 
funciona para pruebas (o tal vez si es mejorable con un Kernel al gusto y optimizado además de mejoras en la interacción al mismo).</p>
<p>Como algo más hay un tópico del que se habla mucho y es la microsegmentación. Es posible hacer algo de ello con máquinas virtuales, no es un concepto nuevo. Se trata de utilizar equipos de red virtuales (normalmente firewalls). Si quieres aprender a hacerlo, puedes comenzar por jugar con la idea del post. Eso o montar un GNS3 y jugar un poco con SDN y virtualización de equipos de red.</p>
<p>Otro de los puntos a tomar en cuenta es que se pueden crear certificados para cifrar las conexiones RDP de nuestro server VBox. Todo ello está en la <a href="https://www.virtualbox.org/manual/ch07.html">documentación</a>.</p>
<p>Está claro que la idea es mejorable pero eso se los dejo a su criterio e imaginación.</p>
<p><strong>Exploiting vulnerabilities, creating new ways through</strong> <em>Happy Hacking!</em></p>
    </article>
            </div>
            <div class="col-lg-4">
                <aside>
<div id="asideAbout" class="card border-0">
    <div class="card-body">
        <h3 class="card-title mt-0">A cerca de EtherGroup</h3>
        <p class="card-text">
            Ethergroup es una empresa mexicana dedicada 
            a proveer servicios integrales en tecnologías
            de Información. Lideramos la transformación 
            tecnológica de nuestros clientes paso a paso, 
            de forma segura y fungimos como impulso a su 
            negocio en esta era digital.
            <br> <br>
            En Ethergroup nos encanta compartir 
            contenido te dejamos este espacio, 
            que busca divulgar conocimiento de 
            diferentes áreas.
        </p>
    </div>
</div><div id="asideTags" class="card border-0">
    <div class="card-body">
        <h3 class="card-title mt-0">Etiquetas</h3>
        <ul class="list-group list-group-flush">
<li class="list-group-item"><a href="/tag/ciberataque.html">Ciberataque</a></li><li class="list-group-item"><a href="/tag/ciberataques.html">Ciberataques</a></li><li class="list-group-item"><a href="/tag/ciberseguridad.html">Ciberseguridad</a></li><li class="list-group-item"><a href="/tag/hacking.html">Hacking</a></li><li class="list-group-item"><a href="/tag/linux.html">Linux</a></li><li class="list-group-item"><a href="/tag/malware.html">Malware</a></li><li class="list-group-item"><a href="/tag/programacion.html">Programación</a></li><li class="list-group-item"><a href="/tag/ransomware.html">Ransomware</a></li><li class="list-group-item"><a href="/tag/servidores.html">Servidores</a></li><li class="list-group-item"><a href="/tag/vulnerabilidad.html">Vulnerabilidad</a></li>        </ul>
    </div>
</div>                </aside>
            </div>
        </div>
    </div>
<footer class="text-muted">
    <div class="container">
        <p>
            Copyright &copy; Ethergroup 2021 | Cybersecurity E-group S. de R.L. de C.V. Sitio web de la empresa Ethergroup.
            Sitio web de la empresa <a href="https://ethergroup.mx/">EtherGroup.</a> 
        </p>
    </div>
</footer>    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/js/bootstrap.min.js" integrity="sha512-OvBgP9A2JBgiRad/mM36mkzXSXaJE9BEIENnVEmeZdITvwT09xnxLtT4twkCa8m/loMbPHsvPl0T8lRGVBwjlQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="/theme/js/navigation.js"></script>
</body>
</html>